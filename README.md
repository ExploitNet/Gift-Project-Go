# Gift Buyer - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–∫—É–ø–∫–∞ Telegram –ø–æ–¥–∞—Ä–∫–æ–≤

[![Language: Russian](https://img.shields.io/badge/Language-–†—É—Å—Å–∫–∏–π-blue)](#—Ä—É—Å—Å–∫–∏–π) [![Language: English](https://img.shields.io/badge/Language-English-green)](#english) [![Telegram](https://img.shields.io/badge/Telegram-@chiefssq-blue?logo=telegram)](https://t.me/cheifssq)

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### –†—É—Å—Å–∫–∏–π
- [üìñ –û–ø–∏—Å–∞–Ω–∏–µ](#-–æ–ø–∏—Å–∞–Ω–∏–µ)
- [‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞](#-–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
  - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
  - [–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—Å–±–æ—Ä–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
  - [–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–¥–æ—Å—Ç—É–ø–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
  - [–õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º](#–ª–æ–∫–∞–ª—å–Ω–∞—è-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø–µ—Ä–µ–¥-–∫–æ–º–º–∏—Ç–æ–º)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [üöÄ –î–µ–ø–ª–æ–π](#-–¥–µ–ø–ª–æ–π)
- [üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](#-–≤–∫–ª–∞–¥-–≤-–ø—Ä–æ–µ–∫—Ç)
- [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)
- [‚öôÔ∏è –ü–æ–¥—Ä–æ–±–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#Ô∏è-–ø–æ–¥—Ä–æ–±–Ω–∞—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
  - [üîß Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#-telegram-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
  - [üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∫—É–ø–∫–∏](#-–∫—Ä–∏—Ç–µ—Ä–∏–∏-–ø–æ–∫—É–ø–∫–∏)
  - [üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –ø–æ–¥–∞—Ä–∫–æ–≤](#-–ø–æ–ª—É—á–∞—Ç–µ–ª–∏-–ø–æ–¥–∞—Ä–∫–æ–≤)
  - [‚è±Ô∏è –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏](#Ô∏è-—á–∞—Å—Ç–æ—Ç–∞-–ø—Ä–æ–≤–µ—Ä–∫–∏)
  - [üöÄ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
  - [üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º](#-—Ç–µ—Å—Ç–æ–≤—ã–π-—Ä–µ–∂–∏–º)
  - [üîí –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏](#-–≥–ª–æ–±–∞–ª—å–Ω—ã–µ-–æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏)
- [üìã –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#-–ø–æ–ª–Ω—ã–π-–ø—Ä–∏–º–µ—Ä-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

### English
- [üìñ Description](#-description)
- [‚ö° Advantages](#-advantages)
- [üöÄ Quick Start](#-quick-start-1)
- [üõ† Development](#-development)
- [üìÅ Project Structure](#-project-structure)
- [üîí Security](#-security)
- [üìä Testing](#-testing)
- [üöÄ Deploy](#-deploy)
- [üìù Logging](#-logging)
- [ü§ù Contributing](#-contributing)
- [üìÑ License](#-license)
- [‚öôÔ∏è Detailed Configuration](#Ô∏è-detailed-configuration)

---

## –†—É—Å—Å–∫–∏–π

### üìñ –û–ø–∏—Å–∞–Ω–∏–µ

**Gift Buyer** ‚Äî —Å–æ—Ñ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–∫—É–ø–∫–∏ Star Gifts –≤ Telegram. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—É–ø–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏.

### ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **üéØ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ —Ä–∞–∑–Ω—ã–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º
- **üîó –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤ –≤–º–µ—Å—Ç–æ ID
- **üåê –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª
- **‚ö° –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ç–∏–∫–µ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏
- **üéõÔ∏è –¢–æ—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ —Ü–µ–Ω–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏ –ª–∏–º–∏—Ç–∞–º
- **‚öôÔ∏è –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
- **üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî graceful shutdown –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç** ‚Äî —É–º–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö API
- **üì± –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram** ‚Äî –≤—Å–µ –æ—à–∏–±–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã –ø–æ–∫—É–ø–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram –±–æ—Ç
- **‚è±Ô∏è –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã** ‚Äî 10-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º
- **üõ°Ô∏è –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º** ‚Äî –ø–∞—É–∑–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
go mod download
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
go build -o gift-buyer cmd/main.go
./gift-buyer
```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
go mod tidy              # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go test ./...            # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
go test -v ./...         # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
go test -cover ./...     # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go vet ./...             # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º
go fmt ./...             # –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
go build -o gift-buyer cmd/main.go  # –°–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
go run cmd/main.go       # –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ —Å–±–æ—Ä–∫–∏
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```bash
go test ./... && go vet ./... && go fmt ./...
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ cmd/                    # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/              # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ service/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ pkg/                  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã
‚îú‚îÄ‚îÄ .github/workflows/    # GitHub Actions
‚îú‚îÄ‚îÄ docs/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ go.mod               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Go
‚îú‚îÄ‚îÄ .golangci.yml        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
‚îî‚îÄ‚îÄ env.example          # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º (0600)
- –ü—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é gosec
- –û–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
go test ./...           # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
go test -cover ./...    # –¢–µ—Å—Ç—ã —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
```

## üöÄ –î–µ–ø–ª–æ–π

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞
```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
GOOS=linux GOARCH=amd64 go build -o gift-buyer-linux cmd/main.go
GOOS=windows GOARCH=amd64 go build -o gift-buyer-windows.exe cmd/main.go
GOOS=darwin GOARCH=amd64 go build -o gift-buyer-macos cmd/main.go
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `LOG_LEVEL`:
- `debug` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `info` - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `warn` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `error` - –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

### üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –±–æ—Ç–µ –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram:

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∫—É–ø–∫–∞—Ö:**
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ (—á–∞—Å—Ç—å –ø–æ–¥–∞—Ä–∫–æ–≤ –∫—É–ø–ª–µ–Ω–∞)
- ‚ùå –ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–æ–∫

**–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- üîÑ –ù–∞—á–∞–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ API
- ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üîÑ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ API:

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- `AUTH_KEY_UNREGISTERED` - –∫–ª—é—á –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- `CONNECTION_NOT_INITED` - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- `SESSION_REVOKED` - —Å–µ—Å—Å–∏—è –æ—Ç–æ–∑–≤–∞–Ω–∞

**–ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
1. üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ API
2. ‚è∏Ô∏è –ü–∞—É–∑–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–¥–∞—Ä–∫–æ–≤
3. üîÑ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram API
4. ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç 10 –º–∏–Ω—É—Ç –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
5. ‚ñ∂Ô∏è –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–¥–∞—Ä–∫–æ–≤
6. üö´ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `go test ./... && go vet ./...` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
5. –ó–∞–ø—É—à—å—Ç–µ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
6. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

### üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

1. **–°–∫–∞—á–∞–π—Ç–µ –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   git clone <repository-url>
   cd gift-buyer
   go build -o gift-buyer cmd/main.go
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   cp internal/config/config_example.json internal/config/config.json
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config.json —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:**
   ```bash
   ./gift-buyer
   ```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**üéØ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤:**
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–Ω—ã—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –ö–∞–∂–¥—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π (ReceiverType)
- –ü–æ–ª–Ω–∞—è —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**üîó –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤:**
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (@username) –∏ –∫–∞–Ω–∞–ª–æ–≤ (@channelname)
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞—Ç—å —Ç–æ—á–Ω—ã–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–µ–≥–∏ –≤ ID

**üåê –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –Ω–∞ –∫–∞–Ω–∞–ª –∏–ª–∏ –±—ã—Ç—å –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –ü–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –≤ –≤—ã–±–æ—Ä–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

**üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö API
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

**‚è±Ô∏è –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã:**
- 10-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ —Ç–∞–π–º–∞—É—Ç–∞

**üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–∫—É–ø–æ–∫
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### ‚öôÔ∏è –ü–æ–¥—Ä–æ–±–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### üîß Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`tg_settings`)

```json
{
    "tg_settings": {
        "app_id": 12345678,
        "api_hash": "–≤–∞—à_api_hash",
        "phone": "+1234567890",
        "password": "–ø–∞—Ä–æ–ª—å_2fa",
        "tg_bot_key": "—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞",
        "notification_chat_id": 123456789
    }
}
```

- **`app_id`** –∏ **`api_hash`** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ [my.telegram.org](https://my.telegram.org)
- **`phone`** ‚Äî –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **`password`** ‚Äî –ø–∞—Ä–æ–ª—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º `""` –µ—Å–ª–∏ 2FA –æ—Ç–∫–ª—é—á–µ–Ω–∞)
- **`tg_bot_key`** ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (**—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–∫—É–ø–æ–∫**)
- **`notification_chat_id`** ‚Äî ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–≤–∞—à user ID)

**üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞–∂–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–∫—É–ø–æ–∫ (—É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á–∞)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ API –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –¢–∞–π–º–∞—É—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–±–æ–∏

#### üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∫—É–ø–∫–∏ (`criterias`)

**üÜï –ù–æ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏!** –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ —Ä–∞–∑–Ω—ã–º –ª—é–¥—è–º:

```json
{
    "criterias": [
        {
            "min_price": 10,
            "max_price": 100,
            "total_supply": 1000,
            "count": 2,
            "receiver_type": [1]
        },
        {
            "min_price": 500,
            "max_price": 1000,
            "total_supply": 100,
            "count": 1,
            "receiver_type": [0, 2]
        }
    ]
}
```

- **`min_price`** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ–¥–∞—Ä–∫–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö
- **`max_price`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ–¥–∞—Ä–∫–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö  
- **`total_supply`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—â–∏–π —Ç–∏—Ä–∞–∂ –ø–æ–¥–∞—Ä–∫–∞
- **`count`** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø–æ —ç—Ç–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é
- **`receiver_type`** ‚Äî –º–∞—Å—Å–∏–≤ —Ç–∏–ø–æ–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –¥–ª—è —ç—Ç–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä–∏—è:
  - `0` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–±–µ
  - `1` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - `2` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–∞–Ω–∞–ª/—Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—É

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏:**
- –î–µ—à–µ–≤—ã–µ –ø–æ–¥–∞—Ä–∫–∏ (10-100 –∑–≤–µ–∑–¥) –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (`receiver_type: [1]`)
- –î–æ—Ä–æ–≥–∏–µ –ø–æ–¥–∞—Ä–∫–∏ (500-1000 –∑–≤–µ–∑–¥) –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–µ–±–µ –∏–ª–∏ –≤ –∫–∞–Ω–∞–ª—ã (`receiver_type: [0, 2]`)

#### üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ (`receiver`)

**üÜï –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–∞–Ω–∞–ª–æ–≤ –≤–º–µ—Å—Ç–æ ID:

```json
{
    "receiver": {
        "user_receiver_id": ["@username1", "@username2", "username3"],
        "channel_receiver_id": ["@channel1", "@channel2", "channel3"]
    }
}
```

**–§–æ—Ä–º–∞—Ç—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤:**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** `@username` (—Ç–µ–≥)
- **–ö–∞–Ω–∞–ª—ã:** `@channelname` (—Ç–µ–≥)

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `receiver_type` –∏–∑ –∫—Ä–∏—Ç–µ—Ä–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–≥ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –º–∞—Å—Å–∏–≤–∞
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–µ–≥–∏ –≤ ID –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç–µ–º, –∫–æ–º—É –∫–∞–∫–∏–µ –ø–æ–¥–∞—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–¥–æ–±–Ω—ã—Ö —Ç–µ–≥–æ–≤ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö ID
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã

#### ‚è±Ô∏è –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (`ticker`)

```json
{
    "ticker": 2.0
}
```

–ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –Ω–æ–≤—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.0 —Å–µ–∫—É–Ω–¥—ã)

#### üöÄ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**‚ö° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

```json
{
    "retry_count": 5,
    "retry_delay": 2.5,
    "concurrency_gift_count": 10,
    "concurrent_operations": 300,
    "rpc_rate_limit": 30
}
```

**üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:**
- **`retry_count`**: **5+** –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- **`retry_delay`**: **2-3 —Å–µ–∫—É–Ω–¥—ã** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ API
- **`rpc_rate_limit`**: **–º–∞–∫—Å–∏–º—É–º 30 RPS** –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ Telegram

**–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- **`retry_count`** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–≤—Ç–æ—Ä–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–∫—É–ø–∫–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 5+)
- **`retry_delay`** ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ –ø–æ–≤—Ç–æ—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-3 —Å–µ–∫—É–Ω–¥—ã)
- **`concurrency_gift_count`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **`concurrent_operations`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **`rpc_rate_limit`** ‚Äî –ª–∏–º–∏—Ç RPC –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –¥–ª—è Telegram API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ 30 RPS)

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–≤—Ç–æ—Ä–æ–≤ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- RPC –∑–∞–ø—Ä–æ—Å—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ Telegram
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

#### üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (`test_mode`)

```json
{
    "test_mode": true
}
```

–í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:
- **–ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è** –æ–±—â–∏–π —Ç–∏—Ä–∞–∂ (`total_supply`)
- **–ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è** –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
- **–ü–æ–ª–µ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º** –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –Ω–µ–ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
- –ü–æ–¥–∞—Ä–∫–∏ –ø–æ–∫—É–ø–∞—é—Ç—Å—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### üîí –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–∏

```json
{
    "total_star_cap": 10000,
    "max_buy_count": 5,
    "limited_status": false
}
```

- **`total_star_cap`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∞—Ä–∫–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö
- **`max_buy_count`** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –ø–æ–∫—É–ø–æ–∫
- **`limited_status`** ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ (true = —Ç–æ–ª—å–∫–æ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, false = –≤—Å–µ –ø–æ–¥–∞—Ä–∫–∏)

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—è:**
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–∞ –ø–æ–∫—É–ø–∫—É 3+2+1=6 –ø–æ–¥–∞—Ä–∫–æ–≤, –Ω–æ `max_buy_count: 4`, —Ç–æ –∫—É–ø–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ 4 –ø–æ–¥–∞—Ä–∫–∞ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—è–≤–ª–µ–Ω–∏—è).

### üìã –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```json
{
    "logger_level": "info",
    "soft_config": {
        "tg_settings": {
            "app_id": 12345678,
            "api_hash": "–≤–∞—à_api_hash",
            "phone": "+1234567890",
            "password": "",
            "tg_bot_key": "",
            "notification_chat_id": 123456789
        },
        "criterias": [
            {
                "min_price": 10,
                "max_price": 50,
                "total_supply": 1000,
                "count": 3,
                "receiver_type": [1]
            },
            {
                "min_price": 100,
                "max_price": 500,
                "total_supply": 500,
                "count": 2,
                "receiver_type": [0, 2]
            }
        ],
        "total_star_cap": 5000,
        "receiver": {
            "user_receiver_id": ["@username1", "@username2", "123456789"],
            "channel_receiver_id": ["@channel1", "@channel2"]
        },
        "test_mode": false,
        "max_buy_count": 4,
        "ticker": 2.0,
        "retry_count": 5,
        "retry_delay": 2.5,
        "limited_status": false,
        "concurrency_gift_count": 10,
        "concurrent_operations": 300,
        "rpc_rate_limit": 30
    }
}
```

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.23.4+
- Telegram –∞–∫–∫–∞—É–Ω—Ç —Å API –∫–ª—é—á–∞–º–∏(https://my.telegram.org/apps)
- Telegram –±–æ—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (**—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**)

### ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Å—Ç–∞—Ç—É—Å–µ –ø–æ–∫—É–ø–æ–∫ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞:

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞:**
   - –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

2. **–ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à User ID:**
   - –ù–∞–ø–∏—à–∏—Ç–µ [@userinfobot](https://t.me/userinfobot)
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à User ID

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```json
   {
     "tg_bot_key": "1234567890:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
     "notification_chat_id": 123456789
   }
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º:**
   - –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å" –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ:
- ‚úÖ/‚ùå –°—Ç–∞—Ç—É—Å–µ –ø–æ–∫—É–ø–æ–∫ –ø–æ–¥–∞—Ä–∫–æ–≤
- üîÑ –ü—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö API
- ‚è±Ô∏è –¢–∞–π–º–∞—É—Ç–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## English

### üìñ Description

**Gift Buyer** is a modern automated system for purchasing Star Gifts in Telegram. The program continuously monitors available gifts, validates them against configured criteria, and automatically purchases eligible options with prioritization capabilities.

### ‚ö° Advantages

- **üéØ Gift Prioritization** ‚Äî configurable criteria allow sending different gifts to different recipients
- **üîó Tag Support** ‚Äî ability to use user and channel tags instead of IDs
- **üåê Universal Access** ‚Äî no need to be in contacts with users or subscribe to channels
- **üöÄ High Speed** ‚Äî instant reaction to new gift appearances
- **üéõÔ∏è Precise Filtering** ‚Äî configurable criteria for price, quantity, and limits
- **‚öôÔ∏è Parallel Processing** ‚Äî simultaneous purchase of multiple gifts
- **üöÄ Optimized Performance** ‚Äî recommended settings for maximum efficiency
- **üì± Notifications** ‚Äî instant Telegram alerts
- **üíæ Caching** ‚Äî state persistence between restarts
- **üõ°Ô∏è Security** ‚Äî graceful shutdown and error handling
- **üîÑ Automatic Reconnect** ‚Äî smart reconnection on critical API errors
- **üì± Telegram Logging** ‚Äî all errors and purchase statuses are sent to Telegram bot
- **‚è±Ô∏è Controlled Timeouts** ‚Äî 10-minute timeout for entering code with automatic deactivation
- **üõ°Ô∏è Fault Tolerance** ‚Äî pause monitoring during reconnection with subsequent restoration

### üöÄ Quick Start

### Install dependencies
```bash
go mod download
```

### Set up environment variables
Copy the example environment file:
```bash
cp env.example .env
```

Fill in the `.env` file with your data:
- `TG_APP_ID` - Telegram application ID
- `TG_API_HASH` - API Hash from Telegram
- `TG_PHONE` - Phone number
- `TG_PASSWORD` - Password (optional)

### Build and run
```bash
go build -o gift-buyer cmd/main.go
./gift-buyer
```

## üõ† Development

### Available commands
```bash
go mod tidy              # Update dependencies
go test ./...            # Run tests
go test -v ./...         # Run tests with verbose output
go test -cover ./...     # Run tests with coverage
go vet ./...             # Check code with static analyzer
go fmt ./...             # Format code
go build -o gift-buyer cmd/main.go  # Build binary file
go run cmd/main.go       # Run without building
```

### Local check before commit
```bash
go test ./... && go vet ./... && go fmt ./...
```

## üìÅ Project Structure

```
‚îú‚îÄ‚îÄ cmd/                    # Application entry points
‚îú‚îÄ‚îÄ internal/              # Internal logic
‚îÇ   ‚îú‚îÄ‚îÄ config/           # Configuration
‚îÇ   ‚îî‚îÄ‚îÄ service/          # Business logic
‚îú‚îÄ‚îÄ pkg/                  # Reusable packages
‚îú‚îÄ‚îÄ .github/workflows/    # GitHub Actions
‚îú‚îÄ‚îÄ docs/                 # Documentation
‚îú‚îÄ‚îÄ go.mod               # Go dependencies
‚îú‚îÄ‚îÄ .golangci.yml        # Linter configuration
‚îî‚îÄ‚îÄ env.example          # Environment variables example
```

## üîí Security

The project uses:
- Cryptographically secure random number generators
- Secure file permissions (0600)
- Security checks with gosec
- Handling of all errors

## üìä Testing

```bash
go test ./...           # Run all tests
go test -cover ./...    # Tests with coverage report
```

Coverage report is saved to `coverage.html`.

## üöÄ Deploy

### Automatic deploy
When pushing to `main` branch automatically:
1. All tests are run
2. Binary files are built for all platforms
3. Release is created with artifacts

### Manual build
```bash
# Build for all platforms
GOOS=linux GOARCH=amd64 go build -o gift-buyer-linux cmd/main.go
GOOS=windows GOARCH=amd64 go build -o gift-buyer-windows.exe cmd/main.go
GOOS=darwin GOARCH=amd64 go build -o gift-buyer-macos cmd/main.go
```

## üìù Logging

Logging levels are configured via `LOG_LEVEL` variable:
- `debug` - Detailed debug information
- `info` - General information (default)
- `warn` - Warnings
- `error` - Errors only

### üì± Telegram Notifications

When a bot is configured, all important events are automatically sent to Telegram:

**Purchase Notifications:**
- ‚úÖ Successful purchase of all gifts
- ‚ö†Ô∏è Partial purchase (some gifts bought)
- ‚ùå Failed purchase with error details

**System Notifications:**
- üîÑ Reconnection process started
- ‚úÖ Successful reconnection
- ‚ùå Critical API errors
- ‚è±Ô∏è Authentication timeouts

### üîÑ Automatic Reconnection System

The program automatically detects and handles critical API errors:

**Critical errors requiring reconnection:**
- `AUTH_KEY_UNREGISTERED` - authentication key not registered
- `CONNECTION_NOT_INITED` - connection not initialized  
- `SESSION_REVOKED` - session revoked

**Reconnection process:**
1. üîç Critical API error detection
2. ‚è∏Ô∏è Pause gift monitoring
3. üîÑ Reconnect to Telegram API
4. ‚è±Ô∏è 10-minute timeout for code entry (if needed)
5. ‚ñ∂Ô∏è Resume gift monitoring
6. üö´ Automatic shutdown on failure

**Important:** If reconnection fails within 10 minutes, the program automatically terminates to prevent infinite retry loops.

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Run `go test ./... && go vet ./...` for checks
4. Commit your changes (`git commit -m 'Add amazing feature'`)
5. Push the branch (`git push origin feature/amazing-feature`)
6. Create a Pull Request

## üìÑ License

This project is distributed under the MIT License.

### ‚öôÔ∏è Detailed Configuration

#### üîß Telegram Settings

**‚ö†Ô∏è IMPORTANT:** Telegram settings are loaded from environment variables, NOT from JSON file!

Required environment variables:
```bash
export TG_APP_ID=12345678
export TG_API_HASH=your_api_hash
export TG_PHONE=+1234567890
```

Optional environment variables:
```bash
export TG_PASSWORD=2fa_password           # Only if 2FA is enabled
export TG_BOT_KEY=bot_token              # For notifications
export TG_NOTIFICATION_CHAT_ID=123456789 # Chat ID for notifications
export DEVICE_MODEL="MacBook Pro M1 Pro" # Device model
export SYSTEM_VERSION="macOS 15.3.1"     # System version
export APP_VERSION="11.9 (272031) APP_STORE" # App version
export SYSTEM_LANG_CODE=en               # System language
export LANG_CODE=en                      # Interface language
export LANG_PACK=en                      # Language pack
```

In JSON file, the `tg_settings` section is ignored - all values are taken from environment variables.

**Parameter descriptions:**
- **`TG_APP_ID`** and **`TG_API_HASH`** ‚Äî required parameters from [my.telegram.org](https://my.telegram.org)
- **`TG_PHONE`** ‚Äî account phone number in international format
- **`TG_PASSWORD`** ‚Äî two-factor authentication password (can be omitted if 2FA is disabled)
- **`TG_BOT_KEY`** ‚Äî Telegram bot token for notifications (**recommended for error notifications and purchase status**)
- **`TG_NOTIFICATION_CHAT_ID`** ‚Äî chat ID for sending notifications (your user ID)

**üí° Recommendation:** Configure a Telegram bot for important notifications:
- Purchase status notifications (success/failure)
- Critical API errors and reconnections
- Authentication timeouts and system failures

#### üéØ Purchase Criteria (`criterias`)

**üÜï New prioritization feature!** Each criteria can now specify specific recipient types, allowing you to configure sending different gifts to different people:

```json
{
    "criterias": [
        {
            "min_price": 10,
            "max_price": 100,
            "total_supply": 1000,
            "count": 2,
            "receiver_type": [1]
        },
        {
            "min_price": 500,
            "max_price": 1000,
            "total_supply": 100,
            "count": 1,
            "receiver_type": [0, 2]
        }
    ]
}
```

- **`min_price`** ‚Äî minimum gift price in stars
- **`max_price`** ‚Äî maximum gift price in stars
- **`total_supply`** ‚Äî maximum total gift supply
- **`count`** ‚Äî number of gifts to purchase for this criteria
- **`receiver_type`** ‚Äî array of recipient types for this criteria:
  - `0` ‚Äî send to yourself
  - `1` ‚Äî send to another user
  - `2` ‚Äî send to channel/supergroup

**Prioritization example:**
- Cheap gifts (10-100 stars) are sent only to users (`receiver_type: [1]`)
- Expensive gifts (500-1000 stars) are sent to yourself or channels (`receiver_type: [0, 2]`)

#### üë§ Gift Recipients (`receiver`)

**üÜï Tag support!** You can now use user and channel tags instead of IDs:

```json
{
    "receiver": {
        "user_receiver_id": ["@username1", "@username2", "123456789"],
        "channel_receiver_id": ["@channel1", "@channel2", "-1001234567890"]
    }
}
```

**Identifier formats:**
- **Users:** `@username` (tag) or `123456789` (ID)
- **Channels:** `@channelname` (tag) or `-1001234567890` (full channel ID)

**How it works:**
- During purchase, the system uses `receiver_type` from criteria to determine recipient type
- Depending on the type, a random ID/tag is selected from the corresponding array
- The system automatically resolves tags to IDs when necessary
- **No need to be in contacts with user or subscribe to channel**

**Advantages of the new system:**
- Full control over which gifts go to which recipients
- Ability to use convenient tags instead of complex IDs
- Universal access without needing to add to contacts

#### ‚è±Ô∏è Check Frequency (`ticker`)

```json
{
    "ticker": 2.0
}
```

Interval between gift checks in seconds (default 2.0 seconds)

#### üöÄ Performance Parameters

**‚ö° Recommended settings for optimal performance:**

```json
{
    "retry_count": 5,
    "retry_delay": 2.5,
    "concurrency_gift_count": 10,
    "concurrent_operations": 300,
    "rpc_rate_limit": 30
}
```

**üìã Setting recommendations:**
- **`retry_count`**: **5+** attempts for maximum reliability
- **`retry_delay`**: **2-3 seconds** for API stability
- **`rpc_rate_limit`**: **maximum 30 RPS** to comply with Telegram limits

**Parameter descriptions:**
- **`retry_count`** ‚Äî number of retry attempts for failed purchases (recommended 5+)
- **`retry_delay`** ‚Äî delay between retry attempts in seconds (recommended 2-3 seconds)
- **`concurrency_gift_count`** ‚Äî maximum number of gifts processed simultaneously
- **`concurrent_operations`** ‚Äî maximum number of concurrent operations
- **`rpc_rate_limit`** ‚Äî RPC request rate limit per second for Telegram API (recommended max 30 RPS)

**Performance Optimization:**
- System uses asynchronous retry processing with configurable delay
- RPC requests are limited to comply with Telegram limits
- Parallel processing of operations for maximum speed
- Intelligent retry system with progressive delay

#### üß™ Test Mode (`test_mode`)

```json
{
    "test_mode": true
}
```

In test mode:
- **Total supply is ignored** (`total_supply`)
- **Capitalization is ignored**
- **Limited field should be negative** to buy unlimited gifts
- Gifts are purchased without real restrictions

#### üîí Global Limiters

```json
{
    "total_star_cap": 10000,
    "max_buy_count": 5,
    "limited_status": false
}
```

- **`total_star_cap`** ‚Äî maximum stars to spend
- **`max_buy_count`** ‚Äî global purchase limit
- **`limited_status`** ‚Äî filter by gift limited status (true = only limited gifts, false = all gifts)

**Global limiter example:**
If you have criteria for 3+2+1=6 gifts, but `max_buy_count: 4`, only 4 gifts will be purchased (in order of appearance).

### üìã Complete Configuration Example

```json
{
    "logger_level": "info",
    "soft_config": {
        "tg_settings": {
            "app_id": 12345678,
            "api_hash": "your_api_hash",
            "phone": "+1234567890",
            "password": "",
            "tg_bot_key": "",
            "notification_chat_id": 123456789
        },
        "criterias": [
            {
                "min_price": 10,
                "max_price": 50,
                "total_supply": 1000,
                "count": 3,
                "receiver_type": [1]
            },
            {
                "min_price": 100,
                "max_price": 500,
                "total_supply": 500,
                "count": 2,
                "receiver_type": [0, 2]
            }
        ],
        "total_star_cap": 5000,
        "receiver": {
            "user_receiver_id": ["@username1", "@username2", "123456789"],
            "channel_receiver_id": ["@channel1", "@channel2"]
        },
        "test_mode": false,
        "max_buy_count": 4,
        "ticker": 2.0,
        "retry_count": 5,
        "retry_delay": 2.5,
        "limited_status": false,
        "concurrency_gift_count": 10,
        "concurrent_operations": 300,
        "rpc_rate_limit": 30
    }
}
```

### üìã Requirements

- Go 1.23.4+
- Telegram account with API credentials  
- Telegram bot for notifications (**recommended**)

### ü§ñ Setting up Telegram Bot (recommended)

To receive error notifications and purchase status updates, configure a Telegram bot:

1. **Create a bot:**
   - Message [@BotFather](https://t.me/BotFather)
   - Use `/newbot` command
   - Follow instructions to create the bot
   - Copy the received token

2. **Get your User ID:**
   - Message [@userinfobot](https://t.me/userinfobot)
   - Copy your User ID

3. **Configure settings:**
   ```json
   {
     "tg_bot_key": "1234567890:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
     "notification_chat_id": 123456789
   }
   ```

4. **Start chat with bot:**
   - Find your bot in Telegram
   - Click "Start" or send `/start`

After setup, you will receive notifications about:
- ‚úÖ/‚ùå Gift purchase status
- üîÑ Reconnection process
- ‚ö†Ô∏è Critical API errors
- ‚è±Ô∏è Authentication timeouts

---

## ‚ö†Ô∏è Disclaimer

This software is provided "as is" for educational purposes. Users are responsible for compliance with Telegram's Terms of Service and any financial transactions performed by the software.

## üìÑ License

This project is provided as-is for educational and personal use.
